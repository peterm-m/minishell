/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   tables.c                                           :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: pedro <pedro@student.42.fr>                +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2024/01/03 19:30:27 by pedro             #+#    #+#             */
/*   Updated: 2024/01/04 17:20:08 by pedro            ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "minishell.h"

/*
	return n
	n >= 0  && n < 55 : shift to state n
	n >= 55 && n < 93 : reduce state with rule n
	n == 93           : accept
	n == 94           : grammar error
	n < 0             : error
*/

int	table_action(int state, int token)
{
	static const unsigned char	action[826] = ""\
	"~~~.~/~)-01234Y" "~~~~~~~~~~~~~~}" "~~~~~~~~~~~~~~W"\
	"56~~~~~~~~~~~~X" "ZZ7~Z~Z~~~~~~~Z" "]]]~]~]~~~~~~~]"\
	"___~_~_~~~~~~~_" "```~`~`~~01234`" "hhh~h~h:<01234h"\
	"jjj~j~j?~01234j" "bbb~b~b~~bbbbbb" "ccc~c~c~~cccccc"\
	"kkk~k~kkkkkkkkk" "mmm~m~mmmmmmmmm" "~~~.~/~)-01234~"\
	"~~~.~/~)-01234~" "~~~~~~~B~~~~~~~" "~~~~~~~C~~~~~~~"\
	"~~~~~~~D~~~~~~~" "~~~~~~~~~EFG~H~" "~~~~~~~I~~~~~~~"\
	"~~~.~/~)-01234~" "~~~.~/~)-01234~" "~~~.~/~)-01234~"\
	"aaa~a~a~~01234a" "sss~s~s~~ssssss" "ggg~g~g?~01234g"\
	"lll~l~lllllllll" "nnn~n~nnnnnnnnn" "iii~i~iP~01234i"\
	"ooo~o~oo~oooooo" "qqq~q~qq~qqqqqq" "56~~Q~~~~~~~~~~"\
	"56~~~~R~~~~~~~~" "uuu~u~uuuuuuuuu" "vvv~v~vvvvvvvvv"\
	"www~w~wwwwwwwww" "~~~~~~~S~~~~~~~" "~~~~~~~T~~~~~~~"\
	"~~~~~~~U~~~~~~~" "~~~~~~~V~~~~~~~" "{{{~{~{{{{{{{{{"\
	"[[7~[~[~~~~~~~[" "\\\\7~\\~\\~~~~~~~\\" "^^^~^~^~~~~~~~^"\
	"ttt~t~t~~tttttt" "fff~f~fP~01234f" "ppp~p~pp~pppppp"\
	"rrr~r~rr~rrrrrr" "ddd~d~d~~dddddd" "eee~e~e~~eeeeee"\
	"xxx~x~xxxxxxxxx" "yyy~y~yyyyyyyyy" "zzz~z~zzzzzzzzz"\
	"|||~|~|||||||||";

	if ((token >= 0 && token <= 14) && (state >= 0 && state <= 54))
		return (action[NUM_TOKEN * state + token] - CHR_STATE0);
	return (-1);
}

/*
	return n:
	n >= 0 && n <= 54: go to state n
	n == 94: grammar error
	n < 0  : error
*/

int	table_goto(int state, int n_terminal)
{
	static const unsigned char go_to[716] = ""\
	"!\"#$%&'~*+(~," "~~~~~~~~~~~~~" "~~~~~~~~~~~~~"\
	"~~~~~~~~~~~~~" "~~~~~~~~~~~~~" "~~~~~~~~~~~~~"\
	"~~~~~~~~~~~~~" "~~~~~~~8~~~~9" "~~~~~~~~~~~~;"\
	"~~~~~~~~~~~=>" "~~~~~~~~~~~~~" "~~~~~~~~~~~~~"\
	"~~~~~~~~~~~~~" "~~~~~~~~~~~~~" "~~@$%&'~*+(~,"\
	"~~A$%&'~*+(~," "~~~~~~~~~~~~~" "~~~~~~~~~~~~~"\
	"~~~~~~~~~~~~~" "~~~~~~~~~~~~~" "~~~~~~~~~~~~~"\
	"~~~J%&'~*+(~," "~~~K%&'~*+(~," "~~~~L&'~*+(~,"\
	"~~~~~~~~~~~~M" "~~~~~~~~~~~~~" "~~~~~~~~~~~N>"\
	"~~~~~~~~~~~~~" "~~~~~~~~~~~~~" "~~~~~~~~~~~~O"\
	"~~~~~~~~~~~~~" "~~~~~~~~~~~~~" "~~~~~~~~~~~~~"\
	"~~~~~~~~~~~~~" "~~~~~~~~~~~~~" "~~~~~~~~~~~~~"\
	"~~~~~~~~~~~~~" "~~~~~~~~~~~~~" "~~~~~~~~~~~~~"\
	"~~~~~~~~~~~~~" "~~~~~~~~~~~~~" "~~~~~~~~~~~~~"\
	"~~~~~~~~~~~~~" "~~~~~~~~~~~~~" "~~~~~~~~~~~~~"\
	"~~~~~~~~~~~~~" "~~~~~~~~~~~~O" "~~~~~~~~~~~~~"\
	"~~~~~~~~~~~~~" "~~~~~~~~~~~~~" "~~~~~~~~~~~~~"\
	"~~~~~~~~~~~~~" "~~~~~~~~~~~~~" "~~~~~~~~~~~~~"\
	"~~~~~~~~~~~~~";

	if ((n_terminal >= 0 && n_terminal <= 12) && (state >= 0 && state <= 54))
		return (go_to[NUM_TOKEN * state + n_terminal] - CHR_STATE0);
	return (-1);
}
